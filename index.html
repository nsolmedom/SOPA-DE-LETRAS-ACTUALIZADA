<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agroletras - Sopa de Letras Agr√≠cola</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/record_modal.css">
    <link rel="stylesheet" href="css/loading-modal.css">
</head>

<body>
    <div id="app">
        <!-- Start Screen -->
        <section id="start-screen" class="screen active">
            <div class="panel">
                <h1 class="title-large">Agroletras üåæ</h1>
            </div>
            <p class="subtitle-large">Explora el mundo agr√≠cola</p>
            <button id="btn-play" class="btn-play">JUGAR</button>
        </section>

        <!-- Mode Selection Screen -->
        <section id="mode-screen" class="screen hidden">
            <button class="btn-back">Volver</button>
            <div class="panel">
                <h2>Selecciona un Modo</h2>
            </div>
            <div class="mode-grid">
                <button class="btn-mode" data-mode="adventure">
                    <span class="icon">üåç</span>
                    <h3>Aventura</h3>
                    <p>Desaf√≠os progresivos</p>
                </button>
                <button class="btn-mode" data-mode="educational">
                    <span class="icon">üéì</span>
                    <h3>Educativo</h3>
                    <p>Niveles escolares</p>
                </button>
                <button class="btn-mode" data-mode="custom">
                    <span class="icon">‚ú®</span>
                    <h3>Personalizable</h3>
                    <p>Crea con IA</p>
                </button>
                <button class="btn-mode" data-mode="ranking">
                    <span class="icon">üèÜ</span>
                    <h3>Clasificaci√≥n</h3>
                    <p>Ranking Global</p>
                </button>
            </div>
        </section>

        <!-- Main Menu (Difficulty Selection) -->
        <section id="menu-screen" class="screen hidden">
            <button class="btn-back">Volver</button>
            <div class="panel">
                <h1 class="title">Agroletras üåæ</h1>
            </div>
            <p class="subtitle">Descubre el mundo agr√≠cola</p>

            <div class="menu-options">
                <h2>Selecciona tu Nivel</h2>
                <div id="difficulty-grid" class="difficulty-grid">
                    <!-- Populated by JS -->
                </div>
            </div>
        </section>

        <!-- Level Selection Screen -->
        <section id="level-screen" class="screen hidden">
            <button class="btn-back">Volver</button>
            <div class="panel">
                <h2 id="level-title">Niveles</h2>
            </div>
            <div id="level-grid" class="level-grid">
                <!-- Buttons 1-30 generated by JS -->
            </div>
        </section>

        <!-- Custom AI Setup Screen -->
        <section id="ai-setup-screen" class="screen hidden">
            <button class="btn-back">Volver</button>
            <div class="panel">
                <h2>Personalizar Partida</h2>
            </div>
            <p class="subtitle">Crea una sopa de letras √∫nica con Inteligencia Artificial.</p>

            <div class="form-group">
                <label for="ai-career">Carrera (Especialidad)</label>
                <select id="ai-career">
                    <option value="Agronom√≠a">Agronom√≠a</option>
                    <option value="Veterinaria">Veterinaria</option>
                    <option value="Zootecnia">Zootecnia</option>
                    <option value="Econom√≠a Agr√≠cola">Econom√≠a Agr√≠cola</option>
                    <option value="Ingenier√≠a Forestal">Ingenier√≠a Forestal</option>
                    <option value="Otro">Otro (Especificar tema)</option>
                </select>
            </div>

            <div id="ai-topic-group" class="form-group hidden">
                <label for="ai-topic">Tema espec√≠fico</label>
                <input type="text" id="ai-topic" placeholder="Ej. Ma√≠z, Hidropon√≠a, Maquinaria...">
            </div>

            <div class="form-group">
                <label for="ai-difficulty">Dificultad</label>
                <select id="ai-difficulty">
                    <option value="facil">F√°cil (8x8)</option>
                    <option value="medio">Medio (10x10)</option>
                    <option value="dificil">Dif√≠cil (12x12)</option>
                    <option value="experto">Experto (15x15)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="ai-levels">Cantidad de Niveles (M√°x. 100)</label>
                <input type="number" id="ai-levels" min="1" max="100" value="1">
            </div>

            <button id="btn-generate" class="btn-primary">Generar Sopa de Letras</button>
            <p id="ai-loading" class="hidden">ü§ñ Generando palabras...</p>
        </section>

        <!-- Global Ranking Screen (Top 3) -->
        <section id="ranking-screen" class="screen hidden">
            <button class="btn-back btn-3d">Volver</button>
            <div class="ranking-banner">
                <h2 class="title-banner">üèÜ TOP 3 MEJORES</h2>
            </div>
            <div class="ranking-panel">
                <!-- Top 3 Container -->
                <div id="top-3-container" class="top-3-container">
                    <!-- Populated by JS -->
                </div>

                <!-- Ranking Actions -->
                <div class="ranking-actions">
                    <button id="btn-challenge" class="btn-ranking-action">Desafiar</button>
                    <button id="btn-full-table" class="btn-ranking-action">Tabla completa</button>
                </div>
            </div>
        </section>

        <!-- Top 20 Global Ranking Screen -->
        <section id="global-ranking-screen" class="screen hidden">
            <button class="btn-back btn-3d">Volver</button>
            <div class="ranking-banner">
                <h2 class="title-banner">CLASIFICACI√ìN GLOBAL</h2>
            </div>
            <div class="ranking-panel">
                <div class="ranking-container">
                    <!-- Podium for Top 3 (Shared with ranking-screen but styled for global) -->
                    <div id="global-podium" class="podium-container">
                        <!-- Populated by JS -->
                    </div>

                    <div id="global-ranking-list" class="ranking-list">
                        <!-- Populated by JS (Ranks 4-20) -->
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="ranking-nav">
                        <button id="btn-prev-page" class="btn-nav hidden">‚¨Ö</button>
                        <button id="btn-next-page" class="btn-nav">‚ûú</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Countdown Overlay -->
        <div id="countdown-overlay" class="modal hidden">
            <div class="countdown-content">
                <h2 id="countdown-ready" class="countdown-ready">¬øPreparado?</h2>
                <div id="countdown-number" class="countdown-number"></div>
            </div>
        </div>

        <!-- Game Screen -->
        <section id="game-screen" class="screen hidden">
            <div class="game-header">
                <button class="btn-pause" id="btn-pause">
                    <span class="pause-icon"></span>
                </button>
                <div class="header-content">
                    <div class="level-number" id="level-number-display">Nivel <span id="level-number">1</span></div>
                    <div class="timer" id="timer-container">‚è±Ô∏è <span id="time-display">00:00</span></div>
                    <div class="score">Encontradas: <span id="found-count">0</span>/<span id="total-count">0</span>
                    </div>
                </div>
            </div>

            <div class="game-container">
                <div class="top-global-container">
                    <div class="top-global-banner">
                        <h3>Top 5 Mejores</h3>
                    </div>
                    <div class="top-global-content">
                        <table class="top-global-table">
                            <thead>
                                <tr>
                                    <th>POS</th>
                                    <th>JUGADOR</th>
                                    <th>TIEMPO PROM.</th>
                                </tr>
                            </thead>
                            <tbody id="top-global-body">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="word-grid" class="grid"></div>
                <div class="word-list-container">
                    <h3>Palabras a buscar:</h3>
                    <ul id="word-list"></ul>
                </div>
            </div>

            <!-- Pause Modal -->
            <div id="pause-modal" class="modal hidden">
                <div class="modal-content pause-content">
                    <h2>PAUSA</h2>
                    <div class="pause-buttons">
                        <button id="btn-resume" class="btn-pause-action">Reanudar</button>
                        <button id="btn-restart-game" class="btn-pause-action">Reiniciar</button>
                        <button id="btn-pause-settings" class="btn-pause-action">Opciones</button>
                        <button id="btn-quit" class="btn-pause-action">Salir</button>
                    </div>
                </div>
            </div>

            <div id="game-over-modal" class="modal hidden">
                <div class="modal-content game-over-content">
                    <div class="modal-banner">
                        <h2 id="modal-title">¬°COMPLETADO!</h2>
                    </div>
                    <div class="level-badge">
                        <span id="modal-level-text">NIVEL 1</span>
                    </div>
                    <div class="stars-container">
                        <span class="star">‚≠ê</span>
                        <span class="star large">‚≠ê</span>
                        <span class="star">‚≠ê</span>
                    </div>
                    <div class="score-badge">
                        <span id="final-time-container">TIEMPO: <span id="final-time">00:00</span></span>
                    </div>
                    <div class="modal-actions">
                        <button id="btn-modal-home" class="btn-action" title="Inicio">
                            <svg viewBox="0 0 24 24">
                                <path d="M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3z" />
                            </svg>
                        </button>
                        <button id="btn-modal-restart" class="btn-action" title="Reiniciar">
                            <svg viewBox="0 0 24 24">
                                <path
                                    d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm-6 8c0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v-3l4 4-4 4v-3c-3.31 0-6-2.69-6-6z" />
                            </svg>
                        </button>
                        <button id="btn-modal-next" class="btn-action btn-worm" title="Siguiente">
                            <svg viewBox="0 0 24 24">
                                <path d="M6 4v16l12-8z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal hidden">
            <div class="modal-content settings-content">
                <button id="btn-close-settings" class="btn-close">√ó</button>
                <h2> Opciones</h2>
                <div class="settings-group">
                    <label class="switch-container">
                        <span>Mostrar Cron√≥metro</span>
                        <input type="checkbox" id="toggle-timer" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="settings-group">
                    <label class="switch-container">
                        <span>Mostrar Datos Curiosos</span>
                        <input type="checkbox" id="toggle-facts" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="settings-group">
                    <label class="switch-container">
                        <span>M√∫sica de Fondo</span>
                        <input type="checkbox" id="toggle-music" checked>
                        <span class="slider"></span>
                    </label>
                    <input type="range" id="volume-bg" min="0" max="1" step="0.1" value="0.5" class="volume-slider">
                </div>
                <div class="settings-group">
                    <label class="switch-container">
                        <span>Efectos de Sonido</span>
                        <input type="checkbox" id="toggle-sfx" checked>
                        <span class="slider"></span>
                    </label>
                    <input type="range" id="volume-sfx" min="0" max="1" step="0.1" value="0.5" class="volume-slider">
                </div>

                <div class="settings-group" style="margin-top: 20px;">
                    <button id="btn-change-name" class="btn-primary hidden"
                        style="width: 100%; font-size: 0.8rem; padding: 10px; display: none;">Cambiar nombre</button>
                </div>

                <!-- Audio Element -->
                <audio id="bg-music" src="assets/sounds/background.mp3" loop></audio>
            </div>
        </div>

        <!-- AI Loading Modal -->
        <div id="ai-loading-modal" class="modal hidden">
            <div class="modal-content loading-content">
                <div class="loading-spinner">üåæ</div>
                <h2>Generando nivel...</h2>
                <p>La IA est√° creando las palabras para tu sopa de letras</p>
                <div class="progress-container">
                    <div id="ai-progress-bar" class="progress-bar"></div>
                </div>
            </div>
        </div>

        <!-- Fact Modal -->
        <div id="fact-modal" class="modal hidden">
            <div class="modal-content fact-content">
                <button id="btn-close-fact" class="btn-close">√ó</button>
                <div class="fact-icon">üí°</div>
                <h2 id="fact-word">PALABRA</h2>
                <p id="fact-text">Aqu√≠ va el dato curioso...</p>
            </div>
        </div>

        <!-- Settings Button -->
        <button id="btn-settings" class="btn-settings">‚öôÔ∏è</button>
    </div>

    <!-- Scripts -->
    <script src="js/data.js"></script>
    <script src="js/word_facts.js"></script>
    <script src="js/grid_generator.js"></script>
    <script src="js/ai_service.js"></script>
    <script src="js/game.js"></script>
    <script src="js/record_system.js"></script>
    <script src="js/record_modal.js"></script>
    <script src="js/main.js"></script>
</body>

</html>